# You may add here your
# server {
#	...
# }
# statements for each of your virtual hosts to this file

##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# http://wiki.nginx.org/Pitfalls
# http://wiki.nginx.org/QuickStart
# http://wiki.nginx.org/Configuration
#
# Generally, you will want to move this file somewhere, and start with a clean
# file but keep this around for reference. Or just disable in sites-enabled.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

upstream blog.parade.io {
    server localhost:8080;
}


server {
	server_name blog.parade.io;
	root /usr/share/nginx/blog;
	try_files $uri @blog_app;
	client_max_body_size 10m;

	location @blog_app {
		proxy_redirect off;
		proxy_pass http://blog.parade.io;
	}
}

server {
	server_name parade.io www.parade.io;
	root /usr/share/nginx/www;
	index index.html index.htm;
}

server
{
    server_name betway.parade.io;
    access_log /var/log/nginx/parade_access.log;
    error_log /var/log/nginx/parade_error.log;

    location /js/ {
        root /usr/share/nginx/parade/;    
    }

    try_files $uri @parade;

    location @parade {
        resolver 8.8.8.8;
	set $target https://casino.betway.com;

        proxy_pass $target;
        proxy_set_header  accept-encoding  "identity";
        proxy_max_temp_file_size 0;
        subs_filter_types text/html;
        subs_filter <head> '<head> <script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/betway/inject.js"></script>' ir;
    }
}

server
{
    server_name 24option.parade.io;
    listen 80;
    access_log /var/log/nginx/parade_access.log;
    error_log /var/log/nginx/parade_error.log;

    location /js/ {
        root /usr/share/nginx/parade/;    
    }

    try_files $uri @parade;

    location @parade {
        resolver 8.8.8.8;

        proxy_pass https://www.24option.com;
        proxy_set_header  accept-encoding  "identity";
        subs_filter_types text/html;
        subs_filter '<head profile="http://gmpg.org/xfn/11">' '<head profile="http://gmpg.org/xfn/11"><script src="//cdn.optimizely.com/js/1960640166.js"></script> </script><script src="/js/24option/inject.js"></script>' ir;
        subs_filter '<head>' '<head><script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/24option/inject.js"></script>' ir;
        subs_filter 'https://www.24option.com' 'http://24option.parade.io' ir;
    }
}


server
{
    server_name optionaffiliates.parade.io;
    listen 80;
    access_log /var/log/nginx/parade_access.log;
    error_log /var/log/nginx/parade_error.log;

    location /js/ {
        root /usr/share/nginx/parade/;    
    }

    try_files $uri @parade;

    location @parade {
        resolver 8.8.8.8;

        proxy_pass http://www.optionaffiliates.com;
        proxy_set_header  accept-encoding  "identity";
        subs_filter_types text/html;
        subs_filter '<head>' '<head><script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/betway/inject.js"></script>' ir;
    }
}

server
{
    server_name empireoption.parade.io;
    listen 80;
    access_log /var/log/nginx/parade_access.log;
    error_log /var/log/nginx/parade_error.log;

    location /js/ {
        root /usr/share/nginx/parade/;    
    }

    try_files $uri @parade;

    location @parade {
        resolver 8.8.8.8;

        proxy_pass https://www.empireoption.com;
        proxy_set_header  accept-encoding  "identity";
        subs_filter_types text/html;
        subs_filter '<head>' '<head><script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/betway/inject.js"></script>' ir;
    }
}

server
{
    server_name traderush.parade.io;
    listen 80;
    access_log /var/log/nginx/parade_access.log;
    error_log /var/log/nginx/parade_error.log;

    location /js/ {
        root /usr/share/nginx/parade/;    
    }

    try_files $uri @parade;

    location @parade {
        resolver 8.8.8.8;

        proxy_pass http://www.traderush.com;
        proxy_set_header  accept-encoding  "identity";
        subs_filter_types text/html;
        subs_filter '<head>' '<head><script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/betway/inject.js"></script>' ir;
    }
}


#        proxy_pass https://www.24option.com;
#        proxy_buffering   off;
#	proxy_redirect    default;
#        proxy_set_header  accept-encoding  "identity";
#        proxy_max_temp_file_size 0;
#        subs_filter_types text/html;
#        subs_filter <head> '<head> <script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/24option/inject.js"></script>' ir;
#server
#{
##    server_name "~^(?<name>\w\d+)\.parade\.io$";
#    server_name ~^(?<name>.+)\.parade\.io$;
#
#    listen 80;
#
#    access_log /var/log/nginx/parade_access.log;
#    error_log /var/log/nginx/parade_error.log;
#
#    location /js/ {
#        root /usr/share/nginx/parade/;    
#    }
#
#    try_files $uri @parade_sub;
#
#    location @parade_sub {
#        resolver 8.8.8.8;
#
#	set $target https://$name.com;
#        proxy_pass $target;
#        proxy_set_header  accept-encoding  "identity";
#        proxy_max_temp_file_size 0;
#        subs_filter_types text/html;
#        subs_filter <head> '<head> <script src="//cdn.optimizely.com/js/1960640166.js"></script> <script src="/js/$name/inject.js"></script>' ir;
#
#    }
#}
